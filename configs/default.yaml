# SpectraViT Reproduction Configuration
# ALL hyperparameters must match the validated research method EXACTLY.

system:
  seed: 42
  device: "cuda"
  num_workers: 4
  pin_memory: true

data:
  train_dir: "/home/biniyam/Datasets/NCT-CRC-HE/NCT-CRC-HE-100K-NONORM/" # <--- Update this to your actual training data path
  img_size: 224
  num_classes: 9
  class_map:
    ADI: 0
    BACK: 1
    DEB: 2
    LYM: 3
    MUC: 4
    MUS: 5
    NORM: 6
    STR: 7
    TUM: 8
  
  # Augmentation
  use_fourier_mixup: true
  mixup_prob: 0.5
  mixup_beta: 1.0
  mixup_strategy: "cross_class"

training:
  epochs: 80
  batch_size: 64
  mixed_precision: true # FP16 AMP
  
  optimizer:
    name: "adamw"
    lr_classifier: 1.0e-3
    lr_backbone: 1.0e-5
    weight_decay: 1.0e-2
    
  scheduler:
    name: "cosine"
    # Cosine Annealing typically decays to 0 or min_lr
    min_lr: 1.0e-6 

loss:
  alpha: 0.5 # Weight for Focal Loss vs SupCon
  temp: 0.07 # SupCon Temperature
  
  # Spectral Regularization
  lambda_l1: 1.0e-4
  lambda_tv: 5.0e-5
  
  # Aux Schedule
  aux_target: 0.5
  aux_dropout: 0.10

model:
  backbone: "vit_small_patch14_dinov2.lvd142m"
  # Blocks to unfreeze (last 2 blocks + norms)
  unfreeze_pattern: 
    - "blocks.10"
    - "blocks.11"
    - "norm"
